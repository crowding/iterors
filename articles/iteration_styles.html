<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="iterors">
<title>A Musical Introduction to Generators • iterors</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A Musical Introduction to Generators">
<meta property="og:description" content="iterors">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">iterors</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/categories.html">Index of `iteror` functions by task</a>
    <a class="dropdown-item" href="../articles/cross-reference.html">Cross reference of iterors to. iteror function</a>
    <a class="dropdown-item" href="../articles/iteration_styles.html">A Musical Introduction to Generators</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/crowding/iterors/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>A Musical Introduction to Generators</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/crowding/iterors/blob/HEAD/vignettes/iteration_styles.rmd" class="external-link"><code>vignettes/iteration_styles.rmd</code></a></small>
      <div class="d-none name"><code>iteration_styles.rmd</code></div>
    </div>

    
    
<p>At times it would be nice to write a loop that explicitly gets the
values of an iterator. Previously, this was an awkward experience with
the <code>iterators</code> package, requiring boilerplate code to catch
some exceptions and re-throw others. In the <code>iterators</code>
packas you would write:</p>
<p>&lt;<consuming_iter_catch>&gt;= x &lt;- icount(10) tryCatch({ repeat
print(nextElem(x)) }, error=function(err) { if (conditionMessage=“err”)
invisible() else stop(x) }) @</consuming_iter_catch></p>
<p>Sometimes it is useful to query whether there is a next element to an
iterator, without necessarily extracting that element. One way to do
that would be to define a new S3 method called . Here’s the definition
of a generic function:</p>
<p>&lt;<generichasnext>&gt;= hasNext &lt;- function(obj, …) {
UseMethod(‘hasNext’) } @</generichasnext></p>
<p>We also need to define method for a iterator class that we’ll call
:</p>
<p>&lt;<hasnextmethod>&gt;= hasNext.ihasNextOr &lt;- function(obj, …) {
obj$hasNext() } @</hasnextmethod></p>
<p>As you can see, an object must be a list with a element that is a
function. That’s the same technique that the class uses to implement the
method.</p>
<p>Now we’ll define a function, called , that takes an arbitrary
iterator and returns an iterator that wraps the specified iterator. That
allows us to turn any iterator into an iterator, thus providing it with
a method:</p>
<p>&lt;<ihasnext>&gt;= ihasNext &lt;- function(iter, …) { noValue &lt;-
new.env() endIter &lt;- new.env() last &lt;- noValue nextOr_ &lt;-
function(or, …) { if (identical(last, noValue)) last &lt;&lt;-
nextOr(iter, endIter) if (identical(last, endIter)) or else { tmp &lt;-
last last &lt;&lt;- noValue tmp } }</ihasnext></p>
<p>hasNext_ &lt;- function() { if (identical(last, noValue)) last
&lt;&lt;- nextOr(iter, endIter) !identical(last, endIter) }</p>
<p>it &lt;- iteror(nextOr_) it$hasNext &lt;- hasNext_ structure(it,
class=c(“ihasNextOr”, class(it))) } @</p>
<p>When the method is called, it calls the method on the underlying
iterator, and the resulting value is saved. That value is then passed to
the user when is called. Of course, it also does the right thing if you
don’t call , or if you call it multiple times before calling .</p>
<p>The <code>hasNext</code> method was introduced in
<code>itertools</code> to improve the experience of iteration.</p>
<p>So now we can easily create an iterator, and get its values in a
while loop, without having to do any messy error handling:
&lt;<hasnextexample>&gt;= it &lt;- ihasNext(icount(3)) while
(hasNext(it)) { print(nextOr(it)) } @</hasnextexample></p>
<p>This</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Peter Meilstrup, Folashade Daniel, Revolution Analytics, Steve Weston, John A. Ramey, Kayla Schaefer, Hadley Wickham.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
